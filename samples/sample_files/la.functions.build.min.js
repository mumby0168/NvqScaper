$(document).ready(function(){Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var t,a,n=Object(this),i=n.length>>>0;if(0===i)return-1;for(t=i-1,1<arguments.length&&((t=Number(arguments[1]))!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(0<t||-1)*Math.floor(Math.abs(t)))),a=0<=t?Math.min(t,i-1):i-Math.abs(t);0<=a;a--)if(a in n&&n[a]===e)return a;return-1}),$.fn.valList=function(){var e=$(this),t="";return e.each(function(e){t=t+","+$(this).val()}),t.replace(/^,|,$/g,"")},$.fn.CheckboxSummary=function(){var e=$(this),t={};return t.count=e.length,t.countSelected=e.filter(":checked").length,t.countNotSelected=e.not(":checked").length,t.countDisabled=e.filter(":disabled").length,t.countNotDisabled=e.not(":disabled").length,t.lstValues=e.valList(),t.lstCheckedValues=e.filter(":checked").valList(),t},window.console||(console={}),console.log=console.log||function(){},console.warn=console.warn||function(){},console.error=console.error||function(){},console.info=console.info||function(){};var o=window,e=document,r=e.documentElement,s=e.getElementsByTagName("body")[0];Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,a=Number(arguments[1])||0;for((a=a<0?Math.ceil(a):Math.floor(a))<0&&(a+=t);a<t;a++)if(a in this&&this[a]===e)return a;return-1}),Array.prototype.remove||(Array.prototype.remove=function(){for(var e,t,a=arguments,n=a.length;n&&this.length;)for(e=a[--n];-1!==(t=this.indexOf(e));)this.splice(t,1);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){"use strict";if("Function"!=typeof e&&"function"!=typeof e||!this)throw new TypeError;var a=this.length>>>0,n=new Array(a),i=this,o=0,r=-1;if(void 0===t)for(;++r!==a;)r in this&&e(i[r],r,i)&&(n[o++]=i[r]);else for(;++r!==a;)r in this&&e.call(t,i[r],r,i)&&(n[o++]=i[r]);return n.length=o,n}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var a=Object(this),n=a.length>>>0;if(0===n)return!1;var i,o,r=0|t,s=Math.max(0<=r?r:n-Math.abs(r),0);for(;s<n;){if((i=a[s])===(o=e)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;s++}return!1}}),$(".dropdown").on("show.bs.dropdown",function(){var e,t,a=(e=o.innerHeight||r.clientHeight||s.clientHeight,t=$("#viewport-proxy").height(),e<t?e:t),n=this.getBoundingClientRect();if(!(n.top>a)){var i=$(this).children(".dropdown-menu").height();$(this).toggleClass("dropup",a-n.bottom<i&&n.top>i)}}),$.notifyDefaults({placement:{from:"top",align:"right"},timer:1e3,url_target:"_self",template:'<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><div data-notify="title"><h3><span data-notify="icon"></span> {1}</h3></div> <div data-notify="message">{2}</div><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'}),UIFunctions.init(),objMarkup.init(),objCandidateFunctions.init(),objWaffle.init(),objPrint.init(),objExport.init(),objUserPreferences.init(),objDocumentUploader.init()});var refresh_ms=3e5,UIFunctions={init:function(){var e=this;e.stuTableFiltering={},e.minimumInputLength=0,e.hellip="…",e.GenericBinds(),e.BindNavigationTooltips(),setTimeout(UIFunctions.RefreshSession,refresh_ms)},BindNavigationTooltips:function(){var e=$(".logged-in-user");e.find(".avatar-wrapper").tooltip({container:"body",placement:"right",title:function(){return e.find(".username").text()}}),$("body.mini-navbar ul#side-menu li:not(.nav-first-level)").tooltip({container:"body",placement:"right",title:function(){return $(this).find("span.nav-label").text()}})},RefreshSession:function(){try{$.get("/session/refresh.cfm?ts="+(new Date).getTime(),function(e){setTimeout(UIFunctions.RefreshSession,refresh_ms)})}catch(e){}},GenericBinds:function(){var e=this;e.BindClickNavigate($('[data-toggle~="click_navigate"][data-url]')),e.BindDatePicker($('[data-toggle~="datepicker"]:not(".readonly")')),e.BindRichTextEditor($('[data-toggle~="rte"]')),e.BindNumberPicker($('[data-toggle~="touchspin"]')),e.BindFileInput($("input[type=file]")),e.BindTooltip($('[data-toggle~="tooltip"]')),e.BindPopover($('[data-toggle~="popover"]')),e.BindExternalContentPopover($('[data-toggle~="popover_external_content"][data-contentexternalselector]')),e.BindSelectAllCheckbox($('input[type=checkbox][data-toggle~="selectall"][data-target]')),e.BindSelectAllButton($('[data-toggle~="selectallbutton"][data-target]')),e.BindToggleShow($('input[type=checkbox][data-toggle~="toggle-show"][data-target]')),e.BindToggleClassCheckbox($('input[type=checkbox][data-toggle~="toggle-class"][data-value][data-target]')),e.BindToggleClassLink($('a[data-toggle~="toggle-class"][data-value][data-target]')),e.BindAjaxModal($('[data-toggle~="bs-ajax-modal"]')),e.BindToggleSlide($('[data-toggle~="slide"][data-target]')),e.BindWindowOpen($('[data-toggle~="window-open"][data-window-url][data-window-name]')),e.BindSearchPanel($("a.ibox-search-panel-toggle")),e.BindGenericSelect2($('select[data-toggle~="select2"]')),e.BindDualListBox($('select[data-toggle~="dual_listbox"][data-item-label]')),e.BindPeityChart($('[data-toggle~="piety_pie"]'),"pie"),e.BindPeityChart($('[data-toggle~="piety_donut"]'),"donut"),e.BindPeityChart($('[data-toggle~="piety_line"]'),"line"),e.BindPeityChart($('[data-toggle~="piety_bar"]'),"bar"),e.BindYoutubeModal($('[data-toggle~="youtube_modal"][data-id][data-url][data-title]')),e.BindHotKeys(),e.BindTableFilters($('table[data-toggle="table_filters"][data-reference]')),"undefined"!=typeof strMasterData&&(strMasterData.stuProperties.blnPIVOTMode?e.LoadUnreadMessageCountPIVOT():e.LoadUnreadMessageCount())},LoadUnreadMessageCount:function(){var t=$("#message-count-badge");t.length&&$.ajax({cache:!1,type:"POST",url:"/views/ajax/messages.cfc?method=GetMessageCount&ts="+(new Date).getTime(),dataType:"json",data:{},success:function(e){1==e.blnSuccess?0!=e.intUnreadMessages&&t.text(e.intUnreadMessages).removeClass("hide"):console.log("Error: Could not load message count (Views.Ajax.GetMessageCount).")},error:function(e,t){console.log("Error: Could not load message count (Views.Ajax.GetMessageCount).")},async:!0})},LoadUnreadMessageCountPIVOT:function(){var e=void 0!==strMasterData.stuProperties.messaging.centreURL?strMasterData.stuProperties.messaging.centreURL:"/handshake.cfm?redir=/local/message",t=void 0!==strMasterData.stuProperties.messaging.signature?strMasterData.stuProperties.messaging.signature:"",a=void 0!==strMasterData.stuProperties.messaging.countURL?strMasterData.stuProperties.messaging.countURL:"";$("a[href='/views/messages/']").attr("target","_blank").attr("href",e),$.ajax({cache:!1,type:"POST",url:a,dataType:"json",data:{returnFormat:"json",signature:t},success:function(e){1==e.intSuccess&&0!=e.intUnreadMessages&&$("#message-count-badge").text(e.intUnreadMessages).removeClass("hide")},error:function(e){},async:!0})},BindYoutubeModal:function(e){var t=this;e.on("click",function(e){t.YoutubeModal($(this).attr("data-id"),$(this).attr("data-url"),$(this).attr("data-title"))})},BindClickNavigate:function(e){e.on("click",function(e){UIFunctions.ChangePage($(this).attr("data-url"))})},BindDualListBox:function(e){var t=this,a="";e.each(function(e){a=void 0===$(this).attr("data-item-label")?"Item":$(this).attr("data-item-label"),$(this).bootstrapDualListbox({filterPlaceHolder:"Filter"+t.hellip,selectedListLabel:"Selected "+a+"s",nonSelectedListLabel:"Available "+a+"s",infoTextEmpty:"0 "+a+"s selected.",infoText:"Showing {0} "+a+"s",infoTextFiltered:'<span class="label label-warning">Filtered</span> {0} of {1} '+a+"s",filterTextClear:"Clear Filter"})})},BindPeityChart:function(e,t){e.peity(t)},BindHotKeys:function(){"undefined"!=typeof strMasterData&&1==strMasterData.stuUserPreferences.Hotkeys&&("Candidate"!=strMasterData.szUserGroup&&$(document).bind("keydown","alt+ctrl+l",function(){objWaffle.Open("learners")}),$(document).bind("keydown","alt+ctrl+p",function(){UIFunctions.ChangePage("/views/user/preferences/")}),$(document).bind("keydown","alt+ctrl+h",function(){UIFunctions.ChangePage("/views/homepage/")}))},BindDatePicker:function(e){jQuery().datepicker?e.datepicker({todayHighlight:!0,autoclose:!0,format:"dd/mm/yyyy",clearBtn:!0}).on("show",function(e){var t=void 0!==$(this).attr("data-date-start")&&!1!==$(this).attr("data-date-start")?$(this).attr("data-date-start"):"";""!=t&&$(this).datepicker("setStartDate",3==$.ListLen(t,"\\")?$.CreateDate($.ListGetAt(t,1,"\\"),$.ListGetAt(t,2,"\\"),$.ListGetAt(t,3,"\\")):"");var a=void 0!==$(this).attr("data-date-end")&&!1!==$(this).attr("data-date-end")?$(this).attr("data-date-end"):"";""!=a&&$(this).datepicker("setEndDate",3==$.ListLen(a,"\\")?$.CreateDate($.ListGetAt(a,1,"\\"),$.ListGetAt(a,2,"\\"),$.ListGetAt(a,3,"\\")):"")}).on("changeDate",function(e){e.date?$($(this).attr("data-valuehidden")).val($.DateFormat(e.date,"yyyy/mm/dd")).change():$($(this).attr("data-valuehidden")).val("").change()}).on("clearDate",function(e){$($(this).attr("data-valuehidden")).val("").change()}):console.log("DEPENDANCY_MISSING: datepicker.")},BindRichTextEditor:function(e){var a=this;jQuery().summernote?e.summernote({height:150,dialogsInBody:!0,maximumImageFileSize:1048576,toolbar:[["style",["bold","italic","underline","clear"]],["para",["ul","ol","paragraph"]],["insert",["link","hr"]],["misc",["undo","redo"]]],callbacks:{onPaste:function(e){var t;if(e.preventDefault(),(e.originalEvent||e).clipboardData)return t=a.CleanWordHTML((e.originalEvent||e).clipboardData.getData("text/plain")),document.execCommand("insertText",!1,t),!1;window.clipboardData&&(t=a.CleanWordHTML(window.clipboardData.getData("Text")),window.getSelection&&window.getSelection().getRangeAt(0).insertNode(document.createTextNode(t)))}}}):console.log("DEPENDANCY_MISSING: summernote.")},CleanWordHTML:function(e){e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<o:p>\s*<\/o:p>/g,"")).replace(/<o:p>.*?<\/o:p>/g,"&nbsp;")).replace(/\s*mso-[^:]+:[^;"]+;?/gi,"")).replace(/\s*MARGIN: 0cm 0cm 0pt\s*;/gi,"")).replace(/\s*MARGIN: 0cm 0cm 0pt\s*"/gi,'"')).replace(/\s*TEXT-INDENT: 0cm\s*;/gi,"")).replace(/\s*TEXT-INDENT: 0cm\s*"/gi,'"')).replace(/\s*TEXT-ALIGN: [^\s;]+;?"/gi,'"')).replace(/\s*PAGE-BREAK-BEFORE: [^\s;]+;?"/gi,'"')).replace(/\s*FONT-VARIANT: [^\s;]+;?"/gi,'"')).replace(/\s*tab-stops:[^;"]*;?/gi,"")).replace(/\s*tab-stops:[^"]*/gi,"")).replace(/\s*face="[^"]*"/gi,"")).replace(/\s*face=[^ >]*/gi,"")).replace(/\s*FONT-FAMILY:[^;"]*;?/gi,"")).replace(/<(\w[^>]*) class=([^ |>]*)([^>]*)/gi,"<$1$3")).replace(/<(\w[^>]*) style="([^\"]*)"([^>]*)/gi,"<$1$3")).replace(/\s*style="\s*"/gi,"")).replace(/<SPAN\s*[^>]*>\s*&nbsp;\s*<\/SPAN>/gi,"&nbsp;")).replace(/<SPAN\s*[^>]*><\/SPAN>/gi,"")).replace(/<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi,"<$1$3")).replace(/<SPAN\s*>(.*?)<\/SPAN>/gi,"$1")).replace(/<FONT\s*>(.*?)<\/FONT>/gi,"$1")).replace(/<\\?\?xml[^>]*>/gi,"")).replace(/<\/?\w+:[^>]*>/gi,"")).replace(/<H\d>\s*<\/H\d>/gi,"")).replace(/<H1([^>]*)>/gi,"")).replace(/<H2([^>]*)>/gi,"")).replace(/<H3([^>]*)>/gi,"")).replace(/<H4([^>]*)>/gi,"")).replace(/<H5([^>]*)>/gi,"")).replace(/<H6([^>]*)>/gi,"")).replace(/<\/H\d>/gi,"<br>")).replace(/<(U|I|STRIKE)>&nbsp;<\/\1>/g,"&nbsp;")).replace(/<(B|b)>&nbsp;<\/\b|B>/g,"")).replace(/<([^\s>]+)[^>]*>\s*<\/\1>/g,"")).replace(/<([^\s>]+)[^>]*>\s*<\/\1>/g,"")).replace(/<([^\s>]+)[^>]*>\s*<\/\1>/g,"");var t=new RegExp("(<P)([^>]*>.*?)(</P>)","gi");e=e.replace(t,"<div$2</div>");var a=new RegExp("(<font|<FONT)([^*>]*>.*?)(</FONT>|</font>)","gi");return e=(e=e.replace(a,"<div$2</div>")).replace(/size|SIZE = ([\d]{1})/g,"")},BindNumberPicker:function(e){jQuery().TouchSpin?e.TouchSpin({verticalbuttons:!0,verticalupclass:"fa fa-plus",verticaldownclass:"fa fa-minus",min:$(this).attr("data-min"),max:$(this).attr("data-max"),decimals:$(this).attr("data-decimals"),step:$(this).attr("data-step")}):console.log("DEPENDANCY_MISSING: TouchSpin.")},BindFileInput:function(e){jQuery().filestyle?e.filestyle({buttonText:" &nbsp;&nbsp;Choose File"}):console.log("DEPENDANCY_MISSING: filestyle.")},BindTooltip:function(e){e.tooltip({})},BindPopover:function(e){e.popover({})},BindExternalContentPopover:function(e){e.popover({content:function(){return $($(this).data("contentexternalselector")).html()}})},BindSelectAllCheckbox:function(e){e.on("change",function(e){var t=$(this),a=$(t.data("target"));a.prop("checked",t.prop("checked")),t.data("trigger")&&a.trigger({type:"change"})})},BindSelectAllButton:function(e){e.on("click",function(e){e.preventDefault();var t=$(this),a=$(t.data("target"));0==t.data("checked")?(t.data("checked",!0),a.prop("checked",!0)):(t.data("checked",!1),a.prop("checked",!1))})},BindToggleShow:function(e){e.on("change",function(e){$(this).is(":checked")?$($(this).data("target")).show():$($(this).data("target")).hide()})},BindToggleClassCheckbox:function(e){e.on("change",function(e){$($(this).data("target")).toggleClass($(this).data("value"))})},BindToggleClassLink:function(e){e.on("click",function(e){$($(this).data("target")).toggleClass($(this).data("value"))})},BindAjaxModal:function(e){var a=this;e.on("click",function(e){e.preventDefault();var t=$(this).data("remote")||$(this).attr("href");a.AjaxModal("la-bs-ajax-modal",t)})},BindToggleSlide:function(e){e.on("click",function(e){e.preventDefault();var t=$(this),a=$(t.data("target"));a.is(":visible")?a.slideUp():a.slideDown()})},BindWindowOpen:function(e){var t=this;e.on("click",function(e){e.preventDefault(),t.OpenWindow($(this).attr("data-window-url"),$(this).attr("data-window-name"))})},BindSearchPanel:function(e){e.on("click",function(e){e.preventDefault(),$(this).parents(".ibox").find(".ibox-search-panel").stop(!0,!0).slideToggle()})},BindTableFilters:function(e){var n=this;e.each(function(e){var a=$(this);n.stuTableFiltering[a.data("reference")]={reference:a.data("reference"),$element:a,$filters:a.find('[data-toggle="table_cell_filter"][data-target][data-reference]'),filters:{}},n.stuTableFiltering[a.data("reference")].$filters.each(function(e){var t=$(this);n.stuTableFiltering[a.data("reference")].filters[t.data("reference")]={reference:t.data("reference"),$element:t,target:t.data("target"),value:""},t.off("keyup").on("keyup",function(e){n.stuTableFiltering[a.data("reference")].filters[t.data("reference")].value=$(this).val(),n._filterTable(n.stuTableFiltering[a.data("reference")])})})})},_filterTable:function(e){for(var t in e.$element.find("tbody tr").attr("data-filter-display",!0),e.filters){var a=e.filters[t];e.$element.find('tbody tr[data-filter-display="true"] td'+a.target).filter(function(){return!new RegExp(a.value,"i").test($(this).text())}).closest("tr").attr("data-filter-display",!1)}e.$element.find('tbody tr[data-filter-display="true"]').show(),e.$element.find('tbody tr[data-filter-display="false"]').hide()},GenerateModal:function(e,t,a,n,i,o,r,s){var d=this;$("#"+e).remove(),e=void 0===e?"bootstrap-modal":e,t=void 0===t?"Alert":t,a=void 0===a?"":a,n=void 0===n?"":n,r=void 0!==r&&r,s=void 0===s||s,(i=void 0===i?{}:i).show=!1;var l="modal-lg";s||(l="");var c="";c+='<div class="modal" id="'+e+'">',c+='<div class="modal-dialog '+l+'">',c+='<div class="modal-content">',c+='<div class="modal-header">',c+='<button type="button" class="close" data-dismiss="modal">x</button>',c+='<h4 class="modal-title">'+t+"</h4>",c+="</div>",c+='<div class="modal-body">'+a+"</div>",c+='<div class="modal-footer">',c+='<a href="javascript:void(0);" class="btn btn-default pull-left" data-dismiss="modal">Close</a>',n.length&&(c+=n),c+="</div>",c+="</div>",c+="</div>",c+="</div>",$modal=$(c),$("body").append($modal),$modal.modal(i).on("shown.bs.modal",function(e){$.isFunction(o)&&o()}).on("hidden.bs.modal",function(e){1==r&&d.ReloadPage()}).modal("show")},AjaxModal:function(e,t,a,n,i){var o=this;$("#"+e).remove(),a=void 0===a?{}:a,i=void 0!==i&&i,$("#"+e).remove();var r=t,s=$('<div class="modal" id="'+e+'"><div class="modal-body"></div></div>');$("body").append(s),s.modal(a),s.load(r,function(){$.isFunction(n)&&n()}),1==i&&$("#"+e).on("hidden.bs.modal",function(){o.ReloadPage()})},CloseAllModals:function(){$(".modal").modal("hide")},ReloadPage:function(){window.location.href=window.location.href,window.location.reload(!0)},ReloadParentPage:function(){window.opener.location.href=window.opener.location.href,window.opener.location.reload(!0)},PageAlert:function(e,t){var a="";a+='<div class="fixed-top page-alert">',a+='<div class="alert '+(e=void 0===e?"alert-warning":e)+'">',a+='<div class="container">',a+=t=void 0===t?"":t,a+='<a href="javascript:UIFunctions.CloseAllPageAlerts();" class="close"><i class="icon-remove"></i></a>',a+="</div>",a+="</div>",a+="</div>",t.length&&$("body").prepend(a)},CloseAllPageAlerts:function(){$(".page-alert").fadeOut("slow",function(){$(this).remove()})},CloseWindow:function(e){window.close(),1==e&&(window.opener.location.href=window.opener.location.href,window.opener.location.reload(!0))},OpenPreWindow:function(e,t,a){e=void 0===e?"LAWindow":e,t=void 0===t?strMasterData.strWindowDimensions.intMaxPopoutHeight:t,a=void 0===a?strMasterData.strWindowDimensions.intMaxPopoutWidth:a;window.open("/views/general/loading-window.cfm",e,"directories=no,height="+t+",width="+a+",location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no")},OpenWindow:function(e,t,a,n){e=void 0===e?"":e,t=void 0===t?"LAWindow":t,intHeight=void 0===a?strMasterData.strWindowDimensions.intMaxPopoutHeight:a,intWidth=void 0===n?strMasterData.strWindowDimensions.intMaxPopoutWidth:n;var i="directories=no,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no";("max"!=a&&"max"!=n&&(i="height="+intHeight+",width="+intWidth+","+i),""!=e)&&window.open(e,t,i).focus()},ValidateForm:function(e,t,a){a=void 0===a?{}:a,jQuery.validator.addMethod("required_summernote",function(e,t){return!("<p><br></p>"==e||"<p>&nbsp;</p>"==e||!e.length)},"This field is required."),$("form#"+e).validate({ignore:".note-*",rules:t,messages:a,highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error"),$(e).closest(".form-group").find(".input-group-btn button").removeClass("btn-primary").addClass("btn-danger")},unhighlight:function(e){$(e).closest(".form-group").addClass("has-success").removeClass("has-error"),$(e).closest(".form-group").find(".input-group-btn button").removeClass("btn-primary btn-danger").addClass("btn-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(e,t){1<=t.parent(".checkbox").length||1<=t.parent(".radio").length?e.insertAfter(t.parent().parent()):t.parent(".input-group").length?e.insertAfter(t.parent()):t.next(".note-editor").length?e.insertAfter(t.next(".note-editor")):e.insertAfter(t)}})},ChangePage:function(e){window.location=e},ShowGenericErrorModal:function(){this.GenerateModal("ErrorModal","Error","<p>An error has occured. Please refresh your browser and try again.</p>")},BindSelect2AjaxAutoComplete:function(n,i,e,t,a,o){o=void 0!==o?o:25,jQuery().select2?n.select2({theme:"bootstrap",width:"100%",ajax:{url:"/views/ajax/autocomplete.cfc?method="+e+"&cacheDate="+(new Date).getTime(),dataType:"json",delay:250,data:a,processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:t.page*o<e.total_count}}},cache:!0},placeholder:t,allowClear:!0,escapeMarkup:function(e){return e},minimumInputLength:this.minimumInputLength}).on("change",function(e){var t="",a="";n.find("option:selected").each(function(){a+="|"+$(this).text(),t+="|"+$(this).val()}),a.length&&(a=a.substr(1)),t.length&&(t=t.substr(1)),i.val(a)}):console.log("DEPENDANCY_MISSING: select2.")},BindGenericSelect2:function(e,t){t=void 0===t||t,jQuery().select2?e.select2({theme:"bootstrap",width:"100%",allowClear:t,placeholder:"Please select..."}):console.log("DEPENDANCY_MISSING: select2.")},ValidateEmailAddress:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},ShowLoadingModal:function(e){var t='<h3 class="text-center">'+(e=void 0===e?"Please wait&hellip;":e)+'</h3><p class="text-center"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i></p>';UIFunctions.GenerateModal("LoadingModal","Please wait&hellip;",t)},ShowSavedModal:function(e,t,a){t=void 0!==t&&t,a=void 0===a?"":a;var n='<h3 class="text-center"><i class="fa fa-lg fa-check text-success"></i> '+(e=void 0===e?"Save Successful.":e)+"</h3>";UIFunctions.GenerateModal("SavedModal","Save Successful",n,a),t&&$("#SavedModal").on("hidden.bs.modal",function(e){UIFunctions.CloseWindow()})},ShowErrorModal:function(e,t){var a="";a='<h3 class="text-center"><i class="fa fa-lg fa-exclamation-triangle text-danger"></i> '+(e=void 0===e?"An error has occurred.":e)+"</h3>",(t=void 0===t||t)&&(a+='<p class="text-center">Please <a href="javascript:UIFunctions.ReloadPage();">refresh your browser</a> and try again.</p>'),UIFunctions.GenerateModal("ErrorModal","Error",a)},Notification:function(e,t,a,n,i){$.notify({title:e,message:t,icon:n,url:i},{type:a})},FormatFileSize:function(e){if(0==e)return"0 B";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["B","KB","MB","GB","TB"][t]},YoutubeModal:function(e,t,a){var n='<div class="text-center"><iframe width="640" height="385" src="https://www.youtube.com/embed/'+e+'?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>';this.GenerateModal("YoutubeModalPlayer",a,n,"",{},"",!0,!0)},GetColorPalette:function(e){return("#"+palette("mpn65",65<e?65:e).join(",#")).split(",")},HighlightSearch:function(e,t){t.length&&e.mark(t,{element:"span",className:"bg-warning",accuracy:"partially",separateWordSearch:!1})},Round:function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}},objMarkup={init:function(){},checkbox:function(e,t,a,n,i,o,r){var s="",d="",l="checkbox no-margin";return i&&(s="checked"),o&&(d="disabled"),n.length||(l+=" empty-label"),r&&(l+=" checkbox-inline"),'<div class="'+l+'"><input type="checkbox" name="'+e+'" id="'+t+'" class="styled" value="'+a+'" '+s+" "+d+'><label for="'+t+'">'+n+"</label></div>"},radio:function(e,t,a,n,i,o,r){var s="",d="",l="radio no-margin";return i&&(s="checked"),o&&(d="disabled"),n.length||(l+=" empty-label"),r&&(l+=" radio-inline"),'<div class="'+l+'"><input type="radio" name="'+e+'" id="'+t+'" class="styled" value="'+a+'" '+s+" "+d+'><label for="'+t+'">'+n+"</label></div>"},datepicker:function(e,t,a,n,i,o,r){e=void 0!==e?e:"dtPicker",t=void 0!==t?t:"",a=void 0!==a?a:e+"Display";var s=void 0!==s?s:e+"Wrapper";i=void 0!==i?i:"",o=void 0!==o?o:"";var d="",l="";return i=moment(i).isValid()?moment(i).format("YYYY/MM/DD"):"",o=moment(o).isValid()?moment(o).format("YYYY/MM/DD"):"",moment(t).isValid()&&(d=moment(t).format("DD/MM/YYYY"),l=moment(t).format("YYYY/MM/DD")),'<div id="'+s+'" class="input-group date '+(r?"readonly":"")+'" data-toggle="datepicker" data-valuehidden="#'+e+'" '+(i.length?' data-date-start="'+i+'"':"")+(o.length?' data-date-end="'+o+'"':"")+'>  <input type="text" name="'+a+'" id="'+a+'" class="form-control" value="'+d+'" '+(r?"readonly":"")+'/>  <span class="input-group-addon"><i class="fa fa-calendar"></i></span></div><input type="hidden" name="'+e+'" id="'+e+'" value="'+l+'" />'},select:function(e){return'<select name="'+e+'" id="'+e+'" class="form-control"></select>'},select2:function(e){return'<select name="'+e+'" id="'+e+'" class="form-control"></select><input type="hidden" name="'+e+'_displayValue" id="'+e+'_displayValue" value="" />'}},objUserFunctions={init:function(){},SaveEmailSettings:function(){UIFunctions.ValidateEmailAddress($("#emailSettingsForm #szEmailAddress").val())?$.ajax({cache:!1,type:"POST",url:"/assets/ajax/general.cfc?method=SaveEmailSettings&returnFormat=JSON&cacheDate="+(new Date).getTime(),dataType:"json",data:{szEmail:$("#emailSettingsForm #szEmailAddress").val(),intMessageEmailsSetting:$("#emailSettingsForm input[name=messageDigest]:checked").val(),intEvidenceDigest:$("#emailSettingsForm input[name=evidenceDigest]:checked").val(),intUnitSignOffDigest:$("#emailSettingsForm input[name=unitSignOffDigest]:checked").val(),intIVDigest:$("#emailSettingsForm input[name=ivDigest]:checked").val(),intVQDigest:$("#emailSettingsForm input[name=vqDigest]:checked").val(),intContactDiaryDigest:$("#emailSettingsForm input[name=contactDiaryDigest]:checked").val(),intAssessorContactDiaryDigest:$("#emailSettingsForm input[name=assessorContactDiaryDigest]:checked").val(),intCandidateSubmitDigest:$("#emailSettingsForm input[name=candidateSubmitDigest]:checked").val(),intVerificationDigest:$("#emailSettingsForm input[name=verificationDigest]:checked").val()},success:function(e){1==e.intSuccess?UIFunctions.CloseAllModals():(UIFunctions.CloseAllModals(),alert("An error has occured whilst updating your settings. Please refresh your browser and try again"))},error:function(e){alert("An error has occured. Please refresh your browser and try again.")},async:!0}):alert("Please enter a valid email address.")},OpenPasswordWindow:function(){UIFunctions.OpenWindow("/modules/user/password.cfm","ChangePasswordWindow")},OpenAvatarWindow:function(){alert("to be implemented")},SendProblemReport:function(){var e=$("#frmReportProblem"),t=e.find("#description").val();if(0===e.find("#steps").val().length||0===t.length)alert("Description of Issue and Steps to Reproduce issue are both required!");else{var a="";a+="Instance: "+e.find("#instance").val()+"\n",a+="User: "+e.find("#user").val()+"\n",a+="Learner: "+e.find("#learner").val()+"\n",a+="Course: "+e.find("#course").val()+"\n",a+="Outcome: "+e.find("#outcome").val()+"\n",a+="Section: "+e.find("#section").val()+"\n",a+="URL: "+e.find("#url").val()+"\n",a+="User Agent: "+e.find("#useragent").val()+"\n",a+="Description of Issue: "+e.find("#description").val()+"\n",a+="Steps to Reproduce: "+e.find("#steps").val()+"\n";var n="LA Problem Report: "+e.find("#user").val();window.location.href="mailto:"+strMasterData.stuProperties.szSupportEmail+"?subject="+encodeURIComponent(n)+"&body="+encodeURIComponent(a)}}},objUserPreferences={init:function(e){this.stuParams=e,this.arrWebFontSuggestions=[{header:"Open Sans Condensed",body:"Open Sans"},{header:"Oswald",body:"Droid Serif"},{header:"Amatic SC",body:"Josefin Sans"},{header:"Montserrat",body:"Merriweather"},{header:"Roboto Condensed",body:"Roboto"},{header:"Raleway",body:"Roboto Slab"},{header:"Playfair Display",body:"Source Sans Pro"},{header:"Fjalla One",body:"Cantarell"},{header:"Alegreya",body:"Lato"},{header:"Unica One",body:"Vollkorn"}],this.Bind("content-preferences")},Bind:function(e){var t=this,a=$("#"+e),n=a.find("div.content-preference-block[data-preference]"),i=$("body");n.filter('[data-preference-inputtype="select"]').each(function(){UIFunctions.BindGenericSelect2($(this).find("select"),!1)}),a.find('[data-preference="FixedHeader"] input[type="radio"], [data-preference="FixedFooter"] input[type="radio"], [data-preference="SiteLayout"] input[type="radio"], [data-preference="IconStyle"] input[type="radio"], [data-preference="NavigationLayout"] input[type="radio"], [data-preference="BaseFontSize"] input[type="radio"], [data-preference="LayoutSiteStyle"] select, [data-preference="FloatingContentFontColor"] select, [data-preference="LayoutBackgroundURL"] select').on("change",function(e){return t.UpdatePreferencesPreview(i,a,n,$(this)),!0}),t.BindLearnerResultsColumns(a)},BindLearnerResultsColumns:function(e){var t=e.find('div.content-preference-block[data-preference="CandidateManagerColumns"]');if(1==t.length){var a=t.find("#UserPreferenceCandidateManagerColumns"),n=t.find("#UserPreferenceCandidateManagerColumnsOptions");this.arrLearnerResultsColumnsOptions=JSON.parse(n.val()),this.arrSelectedLearnerResultsColumns=a.val().split(","),this.BuildLearnerResultsColumnsOptions(t,a)}},BuildLearnerResultsColumnsOptions:function(t,a){var n=this,e=t.find("#CandidateManagerColumns_Available ul"),r=t.find("#CandidateManagerColumns_Selected ul");r.empty(),e.empty();var s="",d={},l="";for(i=0;i<n.arrSelectedLearnerResultsColumns.length;i++)for(s=n.arrSelectedLearnerResultsColumns[i],o=0;o<n.arrLearnerResultsColumnsOptions.length;o++)(d=n.arrLearnerResultsColumnsOptions[o]).value==s&&(l='<a class="btn btn-sm btn-default btn-block" href="javascript:void(0);" data-preference-option-value="'+d.value+'" data-preference-option-label="'+d.label+'">'+d.label+'<i class="fa fa-chevron-left pull-left" style="margin-top:3px;"></i></a>',r.append(l));for(i=0;i<n.arrLearnerResultsColumnsOptions.length;i++)d=n.arrLearnerResultsColumnsOptions[i],-1==n.arrSelectedLearnerResultsColumns.indexOf(d.value)&&(l='<a class="btn btn-sm btn-default btn-block" href="javascript:void(0);" data-preference-option-value="'+d.value+'" data-preference-option-label="'+d.label+'">'+d.label+'<i class="fa fa-chevron-right pull-right" style="margin-top:3px;"></i></a>',e.append(l));e.off("click").on("click","a",function(e){e.preventDefault(),n.arrSelectedLearnerResultsColumns.push($(this).attr("data-preference-option-value")),n.BuildLearnerResultsColumnsOptions(t,a)}),r.off("click").on("click","a",function(e){e.preventDefault(),n.arrSelectedLearnerResultsColumns.remove($(this).attr("data-preference-option-value")),n.BuildLearnerResultsColumnsOptions(t,a)}),r.sortable("destroy").sortable({})},UpdatePreferencesPreview:function(e,t,a,n){},Save:function(e){var t=!0,a={},n=$("#"+e),i=n.find("div.content-preference-block[data-preference]");if(n.find("p.help-block").remove(),n.find("h4,h5").removeClass("text-danger"),i.each(function(){if("radio"==$(this).attr("data-preference-inputtype"))a[$(this).attr("data-preference")]=$(this).find('input[type="radio"]:checked').val();else if("checkbox"==$(this).attr("data-preference-inputtype"))a[$(this).attr("data-preference")]=$(this).find('input[type="checkbox"]:checked').val();else if("select"==$(this).attr("data-preference-inputtype"))a[$(this).attr("data-preference")]=$(this).find("select").val();else if("hidden"==$(this).attr("data-preference-inputtype"))a[$(this).attr("data-preference")]=$(this).find('input[type="hidden"]').val();else if("custom_CandidateManagerColumns"==$(this).attr("data-preference-inputtype")){var e=[];i.find("#CandidateManagerColumns_Selected a[data-preference-option-value]").each(function(){e.push($(this).attr("data-preference-option-value"))}),0==e.length?(t=!1,$(this).find("h4,h5").addClass("text-danger"),$(this).append('<p class="help-block text-danger">You must select at least one column</p>')):a[$(this).attr("data-preference")]=e.join(",")}}),t){var o={uuidUser:strMasterData.uuidUser,stuPreferences:a},r=$.toJSON(o);$.ajax({cache:!1,type:"POST",url:"/assets/ajax/general.cfc?method=SaveUserPreferences&cacheDate="+(new Date).getTime(),dataType:"json",data:{jsonPacket:r},success:function(e){UIFunctions.CloseAllModals(),UIFunctions.ReloadPage()},error:function(e){alert("An error has occured. Please refresh your browser and try again.")},async:!0})}},ContextualPreferences:function(e){var t=this;UIFunctions.AjaxModal("ContextualPreferencesModal","/views/user/preferences/contextual.cfm?lstPreferences="+e+"&ts="+(new Date).getTime(),{},function(){t.Bind("content-contextual-preferences")})},RevertToDefaults:function(e){$("#"+e).find("div.content-preference-block[data-preference]").each(function(e){var t=$(this),a=t.attr("data-preference-inputtype"),n=t.attr("data-preference-default");switch(console.log(t.attr("data-preference"),a,n),a){case"radio":t.find('input[type="radio"][value="'+n+'"]').prop("checked",!0);break;case"select":t.find("select").val(n).trigger("change");break;default:console.log("Cannot find handler to set default for preference:"+t.attr("data-preference"))}})},GoogleWebfontSuggestions:function(){var e=this,t="",a="<h4>Here are some suggested webfont pairings that you may like:</h4><hr />";for(a+='<ul class="list-unstyled">',i=0;i<e.arrWebFontSuggestions.length;i++)t="javascript:objUserPreferences.SelectWebfonts('"+e.arrWebFontSuggestions[i].header+"','"+e.arrWebFontSuggestions[i].body+"');",a+="<li>"+e.arrWebFontSuggestions[i].header+" and "+e.arrWebFontSuggestions[i].body+' <a class="pull-right btn btn-xs btn-default" href="'+t+'">Select</a> <hr class="m-t-sm m-b-sm" /></li>';a+="</ul>",UIFunctions.GenerateModal("FontSuggestions","Suggested Font Pairings",a)},SelectWebfonts:function(e,t){UIFunctions.CloseAllModals(),$('div.content-preference-block[data-preference="GoogleWebfontHeader"]').find("select").val(e).trigger("change"),$('div.content-preference-block[data-preference="GoogleWebfontBody"]').find("select").val(t).trigger("change")}},objCandidateFunctions={init:function(){var e=this;e.uuidNode="undefined"!=typeof uuidNode?uuidNode:"",e.intStatusID="undefined"!=typeof intStatusID?intStatusID:"",e.uuidCourse="undefined"!=typeof uuidCourse?uuidCourse:"",e.uuidTemplateNode="undefined"!=typeof uuidTemplateNode?uuidTemplateNode:"",e.blnIsCompetence="undefined"!=typeof blnIsCompetence?blnIsCompetence:0,e.blnIsUpload="undefined"!=typeof blnIsUpload?blnIsUpload:0,e.blnIsAdmin="undefined"!=typeof uuidNode?uuidNode:0,e.intStatusCodeID="undefined"!=typeof intStatusCodeID?intStatusCodeID:"",e.blnMatrixBeta="undefined"!=typeof blnMatrixBeta?blnMatrixBeta:"0"},OpenEvidenceWizard:function(e,t,a,n){n=void 0!==n?n:"";var i="/views/course/evidence-wizard/index.cfm?uuidCourse="+e;(t=void 0!==t?t:"").length&&(i=i+"&uuid="+t),n.length&&(i=i+"&"+n),UIFunctions.OpenWindow(i,"EvidenceWizardV3")},OpenExamResultsWizard:function(){this.OpenEvidenceWizard(strMasterData.uuidCourse,"","create","uuidNode="+strMasterData.uuidNode+"&res=1")},OpenChecklistEditorWindow:function(e,t,a,n){n=void 0!==n?n:"UUIDNode",window.open("/formbuilder/form/?referer=evidenceFolder&uuidForm="+e+"&associatedObjectTypeRef="+n+"&associatedObjectUuid="+t+"&uuidFBInstance="+a,"Checklist","status=0,toolbar=1,resizable=1,height=600,width=800")},OpenDuplicationWizard:function(e,t){documentWin=window.open("/modules/duplication-wizard/index.cfm?uuidCourse="+e+"&uuidCandidate="+t,"DuplicationWizard","directories=no,height=700,width=768,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no,top=50,left=50"),documentWin.focus()},DeleteEvidence:function(e,t){UIFunctions.GenerateModal("delete_evidence_modal","Delete Evidence","<p>Are you sure you want to delete this evidence?</p>","<a href=\"javascript:objCandidateFunctions.DeleteEvidenceAjax('"+e+"','"+t+'\')" class="btn btn-primary">Delete</a>')},DeleteEvidenceAjax:function(e,t){$.get("/course/ajax/candidateAjax.cfc?_cf_nodebug=false",{method:"DeleteEvidence",returnFormat:"json",uuidDocument:e,uuidCourse:t},function(e){1==e.intSuccess?(UIFunctions.CloseAllModals(),UIFunctions.ReloadPage()):alert("There was a problem deleting this document. Please refresh your browser and try again.")},"json")},CourseRelocate:function(e){switch(window.location.pathname.toLowerCase()){case"/views/course/contact-diary/":case"/views/course/contact-diary/index.cfm":case"/views/course/evidence-folder/":case"/views/course/evidence-folder/index.cfm":case"/views/homepage/":case"/views/homepage/index.cfm":case"/course/registration_form.cfm":case"/views/evaluation/":case"/views/evaluation/index.cfm":window.location=window.location.pathname.toLowerCase();break;case"/course/progress-view.cfm":window.location="/course/progress-view.cfm?uuidCourse="+e;break;default:window.location="/course/course_folder.cfm?uuidCourse="+e}},SetCourseAndRelocate:function(t){var a=this;$.get("/assets/ajax/general.cfc?_cf_nodebug=false&cacheDate="+(new Date).getTime(),{method:"SetCandidateCurrentSelectedCourseUUID",returnFormat:"json",uuidCourse:t},function(e){1==e?a.CourseRelocate(t):alert("A problem has occurred. Please refresh your browser and try again.")},"json")},OpenReturnWindow:function(e,t,a,n,i,o,r,s){1==(void 0!==window.LA_dirtyFlag&&window.LA_dirtyFlag)?UIFunctions.GenerateModal("competence-matrix-alert","Unsaved Competence Matrix","<p>You have unsaved changes in the competence matrix. Please save before continuing.</p>"):(this.uuidCourse=e,this.uuidTemplateNode=t,this.uuidNode=a,this.szAction=n,this.intStatus=i,this.intCategory=o,this.intNodeType=r,this.szUserGroup=s,szURL="/views/course/contact-diary/entry/?uuidCourse="+this.uuidCourse+"&uuidTemplateNode="+this.uuidTemplateNode+"&uuidNode="+this.uuidNode+"&intStatus="+this.intStatus+"&intCategory="+this.intCategory+"&intNodeType="+this.intNodeType+"&szUserGroup="+this.szUserGroup+"&szAction="+this.szAction,this.blnIsCompetence&&"undefined"!=typeof iframe_competence&&($("#szAction").val(n),this.SubmitFunction(n)),"true"==this.blnIsUpload&&this.SubmitVerification(this.uuidCourse,this.uuidTemplateNode,this.uuidNode),UIFunctions.OpenWindow(szURL,"ContactDiaryWindow"))},OpenUnitGradingWindow:function(e,t,a,n,i,o,r,s,d){var l="/course/assignunitgrade.cfm?uuidCourse="+e+"&uuidTemplateNode="+t+"&uuidNode="+a+"&intStatus="+i+"&intCategory="+o+"&intNodeType="+r+"&szUserGroup="+s+"&blnUnit="+d;UIFunctions.OpenWindow(l,"ContactDiaryWindow")},SubmitFunction:function(e,t){void 0!==t&&($("html").hasClass("ua-ie-6")&&$(t).removeClass("button"),$(t).addClass("disabled").attr("disabled","disabled").val("Please wait")),window.LA_dirtyFlag=!1,"true"==this.blnIsCompetence&&$("#frm_competence").append(window.compMatrix.createFormValues()),$("#frm_competence #szAction").val(e);window.LA_dirtyFlag;$("#frm_competence").submit()},SubmitVerification:function(e,t,a){"undefined"!=typeof frm_competence&&(document.getElementById("frm_competence").action="updateTask.cfm?uuidNode="+a+"&uuidCourse="+e,document.getElementById("frm_competence").submit())},OpenChooseEvidence:function(e,t){var a="/modules/generic/modals/choose-evidence.cfm?uuidCourse="+e+"&UUIDNode="+t+"&ts="+(new Date).getTime();UIFunctions.AjaxModal("ChooseEvidenceModal",a,{},function(){UIFunctions.BindSelectAllCheckbox($("#blnSelectAllEvidence"))},!1)},OpenEvidenceInfo:function(e,t,a,n){var i="/modules/generic/modals/evidence-info.cfm?uuidNode="+e+"&uuidDocument="+t+"&uuidCourse="+a+"&uuidEvidence="+n;UIFunctions.AjaxModal("EvidenceInfoModal",i,{},function(){UIFunctions.BindRichTextEditor($("#szDescription"))},!1)},CourseSnapshot:function(){objPrint.Print("COURSE_SNAPSHOT")},ModifySelectedUnits:function(){if(!strMasterData.blnAllowModify||strMasterData.blnCourseCompleted)return!1;this.OpenAdminWindow(strMasterData.uuidCourse)},QCFWizard:function(){UIFunctions.ChangePage("/views/course/unit-selector/?uuidCourse="+strMasterData.uuidCourse)},OpenAdminWindow:function(e){UIFunctions.OpenWindow("/views/course/unit-selector/chosen-units.cfm?uuidCourse="+e,"UnitSelectionWindow")},AssessmentLog:function(e){UIFunctions.OpenWindow("/course/confirm_assessmentlog.cfm?uuidCourse="+e,"AssessmentLogWindow",200,400)},VerifierComments:function(e){UIFunctions.OpenWindow("/modules/form-builder/?uuidCourse="+e+"&uuidFBTemplate="+strMasterData.stuProperties.szAssessmentLogVerifierCommentsuuidFBTemplate,"VerifierCommentsWindow")},PractitionerOverview:function(e){UIFunctions.OpenWindow("/modules/form-builder/?uuidCourse="+e+"&uuidFBTemplate="+strMasterData.stuProperties.szAssessmentLogPractitionerOverviewuuidFBTemplate,"PractitionerOverviewWindow")},AssessorOverview:function(e){UIFunctions.OpenWindow("/modules/form-builder/?uuidCourse="+e+"&uuidFBTemplate="+strMasterData.stuProperties.szAssessmentLogAssessorOverviewuuidFBTemplate,"AssessorOverviewWindow")},CourseDownload:function(e){UIFunctions.OpenWindow("/course/doc_download.cfm?uuid="+e,"DocDownload")},DownloadPortfolio:function(t){event.stopPropagation(),strMasterData.stuProperties.blnDisablePortfolioArchieveDownload?alert("Your portfolio is no longer available for automatic download. Please contact Customer Support for further details."):($("#download_"+t).hide(),$("#wait_"+t).show(),$.get("/assets/ajax/archiveCourse.cfc?_cf_nodebug=true",{method:"archive",returnFormat:"json",uuidCourse:t},function(e){e?(objCandidateFunctions.GetArchive(t),$("#wait_"+t).hide(),$("#download_"+t).show()):alert("The archiving failed, please try refresh your browser and try again.")}))},OpenEnrolmentWizard:function(e,t,a,n,i){var o="",r="Admin",s=void 0!==s?s:0;o=1==s?"/modules/enrollment-wizard/index.cfm?":"/flexapps/enrollmentwizard/enrollment_wizard.cfm?",o+="workflow="+e,void 0!==t&&(o+="&uuidCandidate="+t),void 0!==a&&(o+="&uuidCourse="+a),void 0!==n&&(o+="&defaultUuidCourseTemplate="+n),void 0!==i&&(o+="&uuidPackage="+i,r+="Package"),UIFunctions.OpenWindow(o,r)},OpenGroupEnrolmentWizard:function(){UIFunctions.OpenWindow("/flexapps/bulkuploader/bulkuploader.cfm","AdminEnrollment")},OpenLearnerClaim:function(){UIFunctions.OpenWindow("/views/custom/learner-claim/","LearnerClaim",strMasterData.strWindowDimensions.intMaxHeight/100*95,strMasterData.strWindowDimensions.intMaxWidth/100*95)},OpenRegistrationWizard:function(){UIFunctions.OpenWindow("/modules/registration-wizard/wizard.cfm","RegistrationWizard")},OpenCandGroupInactivation:function(){UIFunctions.OpenWindow("/views/custom/group-inactivation/","GroupInactivation",strMasterData.strWindowDimensions.intMaxHeight/100*95,strMasterData.strWindowDimensions.intMaxWidth/100*95)},ChangeCandidateStatus:function(e,t,a){szMessage=a?"Are you sure you wish to inactivate this "+strMasterData.stuProperties.stuLabels.szCandidateText+"?":"Are you sure you wish to activate this "+strMasterData.stuProperties.stuLabels.szCandidateText+"?",1==confirm(szMessage)&&UIFunctions.OpenWindow("/administrator/change_candidate_status.cfm?uuidCourse="+t+"&uuidCandidate="+e+"&blnActive="+a,"ChangeCandidateStatusWindow")},OpenCandidatePackages:function(e,t){UIFunctions.OpenWindow("/modules/package-enrolment/?uuidCandidate="+e+"&uuidCourse="+t,"CandidatePackageWindow")},SendLoginDetails:function(e,t){1==confirm("Are you sure you wish to send this "+strMasterData.stuProperties.stuLabels.szCandidateText+" their login details?")&&UIFunctions.OpenWindow("/administrator/send_password_details.cfm?uuidCourse="+t+"&uuidUser="+e,"SendLoginDetailsWindow")},EmailLoginDetails:function(){confirm("Are you sure you wish to email login details to this "+strMasterData.stuProperties.stuLabels.szCandidateText+"?")&&UIFunctions.OpenWindow("/administrator/send_password_details.cfm?uuidUser="+strMasterData.uuidCandidate+"&uuidCourse="+strMasterData.uuidCourse,"SendLoginDetailsWindow")},AssignEvaluation:function(e,t){var a=void 0!==strMasterData.uuidCandidate?strMasterData.uuidCandidate:e,n=void 0!==strMasterData.uuidCourse?strMasterData.uuidCourse:t;1==confirm("Are you sure you wish to assign an evaluation to this "+strMasterData.stuProperties.stuLabels.szCandidateText+"?")&&UIFunctions.OpenWindow("/administrator/assign_evaluation.cfm?uuidCourse="+n+"&uuid="+a,"SendLogingDetailsWindow")},PreviewResultsEntry:function(e){$.getJSON("/candidate-manager/ajax/handler.cfc",{method:"GetResultsEntryModulesForCourse",returnFormat:"JSON",UUIDCourse:e},function(e){var t='<table class="table table-bordered table-striped"><thead><tr><th>Code</th><th>Title</th><th>Grade</th></tr></thead><tbody>';if(0<e.length)for(var a="The following Modules will be submitted for this Candidate.",n=0;n<e.length;n++)t+="<tr><td>"+e[n].szChapter+"</td>",t+="<td>"+e[n].szNodeName+"</td>",t+="<td>"+e[n].displayGrade+"</td></tr>";else a="No Modules will be submitted for this Candidate.";t+="</table>",UIFunctions.GenerateModal("ResultsEntryModal",a,t)})},OpenCommentWindow:function(e){UIFunctions.OpenWindow("/course/edit_comment.cfm?uuidCourse="+e,"CandidateCommentWindow")},UpdateWalledGarden:function(e){UIFunctions.OpenWindow("/modules/registration-wizard/update.cfm?uuidCandidate="+e,"RegistrationWizardUpdate")},OpenAssessmentSiteEdit:function(e){UIFunctions.OpenWindow("/modules/companies/assessment-site-edit.cfm?uuidCourse="+e,"AssessmentSiteEditWindow")},ZipPortfolio:function(t){var a=this,n=$('tr[data-uuidcourse="'+t+'"] button.dropdown-toggle'),i=$('.archive-link[data-uuidcourse="'+t+'"]');n.html('<i class="fa fa-spinner fa-pulse fa-fw"></i> Loading'),$.get("/assets/ajax/archiveCourse.cfc?_cf_nodebug=true",{method:"archive",returnFormat:"json",uuidCourse:t},function(e){n.html('Action <span class="caret"></i>'),1==e.completed&&""==e.error?(a.GetArchive(t),i.show()):alert("The archiving failed, please refresh your browser and try again.")},"json")},GetArchive:function(e){UIFunctions.ChangePage("/views/general/get-archive.cfm?uuidCourse="+e)},ViewLearnerPDR:function(){UIFunctions.ChangePage("/views/pdr/?uuidUser="+strMasterData.uuidCandidate)},DeleteCandidate:function(e){1==confirm("Are you sure you want to delete this "+strMasterData.stuProperties.stuLabels.szCandidateText+"?")&&$.getJSON("/course/ajax/candidateAjax.cfc",{returnformat:"json",method:"deleteCandidate",uuidCandidate:e},function(e){1==e.intSuccess?UIFunctions.ReloadPage():alert(e.szMessage)})},ToggleReleaseNode:function(o){$.ajaxSetup({cache:!1}),$.get("/modules/vrq/ajax/vrq_handler.cfc?_cf_nodebug=false",{method:"ToggleNodeReleasedStatus",returnFormat:"json",uuidNode:o},function(e){if(1==e.intSuccess){var t=$('div[data-recreluuidnode="'+o+'"]'),a=t.find("i.fa"),n=t.find("span.rr-status"),i=$('div[data-incexcuuidnode="'+o+'"]');a.toggleClass("text-danger").toggleClass("text-success").toggleClass("fa-lock").toggleClass("fa-unlock-alt"),1==t.attr("data-blnreleasedtocandidate")?(n.text("Release"),t.attr("data-blnreleasedtocandidate",0),i.show()):(n.text("Recall"),t.attr("data-blnreleasedtocandidate",1),i.hide())}else alert("There was a problem updating the released status of this element.")},"json")},ToggleReleaseElement:function(e){$.get("/modules/vrq/ajax/vrq_handler.cfc?_cf_nodebug=false",{method:"ToggleNodeReleasedStatus",returnFormat:"json",uuidNode:e},function(e){1==e.intSuccess?UIFunctions.ReloadPage():alert("There was a problem updating the released status of this element.")},"json")},ToggleExcludeFromPortfolio:function(o){$.ajaxSetup({cache:!1}),$.get("/modules/vrq/ajax/vrq_handler.cfc?_cf_nodebug=false",{method:"ToggleExcludeFromPortfolioStatus",returnFormat:"json",uuidNode:o},function(e){if(1==e.intSuccess){var t=$('div[data-incexcuuidnode="'+o+'"]'),a=t.find("i.fa"),n=t.find("span.ie-status"),i=$('div[data-recreluuidnode="'+o+'"]');a.toggleClass("text-danger").toggleClass("text-success").toggleClass("fa-times").toggleClass("fa-check"),1==t.attr("data-blnexcludenodefromportfolio")?(n.text("Exclude"),t.attr("data-blnexcludenodefromportfolio",0),i.show()):(n.text("Include"),t.attr("data-blnexcludenodefromportfolio",1),i.hide())}else alert("There was a problem updating the Exclude From Portfolio status of this element.")},"json")},SelectScoreReset:function(){$.ajaxSetup({cache:!1}),$.getJSON("/modules/vrq/ajax/vrq_handler.cfc",{method:"UpdateNodeScore",returnFormat:"JSON",uuidNode:$("#scoreUUIDNode").val(),intMark:""},function(e){1==e.success?UIFunctions.ReloadPage():alert("There was a problem updating this score:\n\n"+e.message)})},SelectScoreSubmit:function(t){if(1==$("#scoreSelect").length)this.SetScore($("#scoreUUIDNode").val(),t),$("#uneditedPos_"+t).val($("#scoreSelect").prop("selectedIndex"));else{var e=$("#edited_"+t).val();$("#"+t).val(e);for(var a=0,n=0;n<$("#scoreLength").val();n++){var i=$("#editscore_"+t+"_"+n).attr("class");0==n&&-1==i.indexOf("Blank")?a=0:-1==i.indexOf("Blank")&&a++}$("#uneditedPos_"+t).val(a),$.ajaxSetup({cache:!1}),$.getJSON("/modules/vrq/ajax/vrq_handler.cfc",{method:"UpdateNodeScore",returnFormat:"JSON",uuidNode:$("#scoreUUIDNode").val(),intMark:e},function(e){$("#select-score_"+t).ajaxComplete(function(){1==e.success?UIFunctions.ReloadPage():alert("There was a problem updating this score:\n\n"+e.message)})})}},SelectScore:function(e,t){var a=window["SCORE_MODAL_"+t.toUpperCase()],n="";n+='<a href="javascript:objCandidateFunctions.SelectScoreReset();" class="btn btn-default">Reset Score</a>',n+="<a href=\"javascript:objCandidateFunctions.SelectScoreSubmit('"+t+'\');" class="btn btn-primary">Submit Score</a>',$("#scoreUUIDNode").val(e),UIFunctions.GenerateModal("SelectScoreModal","Score Element",a,n)},SetEditScore:function(e,t,a){var n=$("#scoreLength").val();if($("#edited_"+t).val(a),0==e){$("#editscore_"+t+"_0").attr("class",classArr[0]);for(var i=1;i<=n;i++)$("#editscore_"+t+"_"+i).attr("class",classArr[i]+"Blank")}else{$("#editscore_"+t+"_0").attr("class",classArr[0]+"Blank");for(i=1;i<n;i++)i<=e?$("#editscore_"+t+"_"+i).attr("class",classArr[i]):$("#editscore_"+t+"_"+i).attr("class",classArr[i]+"Blank")}},SetScore:function(e,t){$.ajaxSetup({cache:!1}),$.getJSON("/modules/vrq/ajax/vrq_handler.cfc",{method:"UpdateNodeScore",returnFormat:"JSON",uuidNode:e,intMark:$("#scoreSelect").val()},function(e){1==e.success?$("#mainScoreDisplay_"+t).html($("#scoreSelect option:selected").text()):alert("There was a problem updating this score:\n\n"+e.message)})},SetEditDisplayStyles:function(e){$("#score_"+e).attr("class",classArr[$("#scoreSelectOption").val()])},ViewConversionChart:function(e){$.ajaxSetup({cache:!1}),$.getJSON("/modules/vrq/ajax/vrq_handler.cfc",{method:"GetConversionChart",returnFormat:"JSON",uuidTemplateNode:e},function(e){for(var t="",a="",n=0;n<e.ConversionChartGrades.length;n++)a+="<tr>",a+="<td>"+e.ConversionChartGrades[n].grade+"</td>",a+="<td>"+e.ConversionChartGrades[n].minWeight+"</td>",a+="<td>"+e.ConversionChartGrades[n].maxWeight+"</td>",a+="</tr>";t+="<h5>"+e.name+"</h5>",t+='<table class="table table-striped table-bordered m-b-n">',t+="<thead><tr><th>Grade</th><th>Min Weight</th><th>Max Height</th></tr></thead>",t+="<tbody>"+a+"</tbody></table>",UIFunctions.GenerateModal("ConversionChartModal","Conversion Chart",t)})},SubmitCompetence:function(){if(1==(void 0!==window.LA_dirtyFlag&&window.LA_dirtyFlag))UIFunctions.GenerateModal("competence-matrix-alert","Unsaved Competence Matrix","<p>You have unsaved changes in the competence matrix. Please save before continuing.</p>");else if(confirm("Are you sure you wish to submit your Competence Claim?"))return this.blnIsCompetence=!0,this.SubmitFunction("submitted"),!0},SubmitFunction:function(e,t){void 0!==t&&($("html").hasClass("ua-ie-6")&&$(t).removeClass("button"),$(t).addClass("disabled").attr("disabled","disabled").val("Please wait")),window.LA_dirtyFlag=!1,"true"==this.blnIsCompetence&&$("#frm_competence").append(window.compMatrix.createFormValues()),$("#frm_competence #szAction").val(e);window.LA_dirtyFlag;$("#frm_competence").submit()},LockRegistration:function(){confirm("Are you sure you want to lock this registration form?")&&this.UpdateRegistrationLock(!0)},UnlockRegistration:function(){confirm("Are you sure you want to unlock this registration form?")&&this.UpdateRegistrationLock(!1)},UpdateRegistrationLock:function(e){$.get("/views/ajax/course.cfc?ts="+(new Date).getTime(),{method:"ToggleRegistrationFormLock",returnformat:"json",uuidCandidate:strMasterData.uuidCandidate,blnLock:e},function(e){"1"==e.intSuccess?UIFunctions.ReloadPage():alert("Sorry, there was an error updating the registration form. Please refresh your browser and try again.")},"json")},SubmitTask:function(){confirm("Are you sure you want to submit this Task for Assessment?")&&UIFunctions.ChangePage("/course/updatetask.cfm?uuidNode="+strMasterData.uuidNode+"&intStatusID="+strMasterData.intStatusID+"&uuidCourse="+strMasterData.uuidCourse+"&uuidTemplateNode="+strMasterData.uuidTemplateNode)},CancelPlan:function(e,t,a,n){confirm("Are you sure you wish to unlock this element?")&&UIFunctions.ChangePage("/course/acceptPlan.cfm?szAction=cancel&szType="+a+"&uuid="+t+"&uuidCourse="+e+"&uuidNode="+n)},AcceptPlan:function(e,t,a,n){confirm("Are you sure you wish to accept the plan?")&&UIFunctions.ChangePage("/course/acceptPlan.cfm?szType="+a+"&uuid="+t+"&uuidCourse="+e+"&uuidNode="+n)},RemoveRelatedDocument:function(e,t,a,n){var i='<a class="btn btn-primary" href="javascript:objCandidateFunctions.DeleteRelatedDocument(\''+(e=void 0!==e?e:"")+"','"+(t="szTableName"!=typeof e?t:"")+"','"+(a=void 0!==a?a:"")+"','"+(n=void 0!==n?n:strMasterData.uuidCourse)+"');\">Delete Document</a>";UIFunctions.GenerateModal("RemoveRelatedDocumentModal","Confirm","<p>Are you sure to wish to remove delete this document?</p>",i)},DeleteRelatedDocument:function(e,t,a,n){e=void 0!==e?e:"",n=void 0!==n?n:strMasterData.uuidCourse,t="szTableName"!=typeof e?t:"",a=void 0!==a?a:"";$.ajax({cache:!1,type:"POST",url:"/views/ajax/course.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"DeleteRelatedDocument",returnFormat:"json",uuidDocument:e,szTableName:t,uuidObject:a,uuidCourse:n},success:function(e){1==e.intSuccess?(UIFunctions.CloseAllModals(),UIFunctions.ReloadPage()):UIFunctions.ShowErrorModal()},error:function(e){UIFunctions.ShowErrorModal()},async:!0})},OpenContactDiary:function(e,t,a,n,i,o){a=void 0!==a?a:"",n=void 0!==n?n:"",e=void 0!==e?e:"",t=void 0!==t?t:"GENERAL";var r=void 0!==strMasterData.blnIsTrainerAssessor?strMasterData.blnIsTrainerAssessor:0,s="Company"==strMasterData.szUserGroup?1:0,d=this.GetExactUserGroup(strMasterData.szUserGroupName,a);i=void 0!==i?i:"",o=void 0!==o?o:{};szURL="/views/course/contact-diary/entry/?ts="+(new Date).getTime()+"&uuidCourse="+a+"&uuidTemplateNode="+n+"&uuidEntry="+e+"&szCategoryRef="+t+"&blnIsTrainerAssessor="+r+"&blnIsCompany="+s+"&szUserGroup="+d+"&callbackReference="+i+"&additionalData="+encodeURI(JSON.stringify(o)),UIFunctions.OpenWindow(szURL,"ContactDiaryWindow")},ViewDiaryEntry:function(e,t){UIFunctions.OpenWindow("/views/course/contact-diary/view/?uuidEntry="+e+"&uuidCourse="+t,"ContactDiaryEntryViewWindow")},GetExactUserGroup:function(e,t){var a=e;return"Trainer"==e&&void 0!==t&&$.ajax({cache:!1,type:"POST",url:"/modules/generic/ajax/candidates.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"GetTrainersSubUserGroups",returnFormat:"json",uuidCourse:t},success:function(e){a=1==e.blnAssessor?"Assessor":1==e.blnInternalVerifier?"Verifier":"WBR"},error:function(e){},async:!1}),a}},objWaffle={init:function(){"undefined"!=typeof Waffle_Content&&$("a.waffle").on("click",function(e){e.preventDefault(),UIFunctions.GenerateModal("WaffleModal","Actions",'<div class="waffle-popover">'+Waffle_Content+"</div>","",{},"",!1,!1)}),this.BindCourseClicks()},BindCourseClicks:function(){$(".course-overview[data-uuidcourse]").find("thead th").off("click").on("click",function(e){e.preventDefault(),objCandidateFunctions.SetCourseAndRelocate($(this).parents(".course-overview").attr("data-uuidcourse"))}),$(document).off("click",".programme-course[data-uuidcourse]").on("click",".programme-course[data-uuidcourse]",function(e){e.preventDefault(),UIFunctions.ChangePage("/course/course_folder.cfm?uuidcourse="+$(this).attr("data-uuidcourse"))}),$(document).off("click",".programme-course[data-uuidcourse] a").on("click",".programme-course[data-uuidcourse] a",function(e){e.stopPropagation()})},Open:function(e){var t=this;switch(UIFunctions.CloseAllModals(),e){case"learners":UIFunctions.AjaxModal("LearnersQuicksearchModal","/modules/generic/modals/quicksearch.cfm?ts="+(new Date).getTime(),{},function(){UIFunctions.BindSelect2AjaxAutoComplete($("#qs_uuidCandidate"),$("#qs_uuidCandidate_displayValue"),"CandidateQuicksearch","Select a "+strMasterData.stuProperties.stuLabels.szCandidateText,function(e){return{szFilter:e.term,page:e.page,szTrainerType:$('input[name="qs_szTrainerType"]').length?$('input[name="qs_szTrainerType"]:checked').val():"all"}}),$("#qs_uuidCandidate").on("change",function(e){var t=$(this).select2("data");1===t.length&&(t=t[0]),UIFunctions.ChangePage("/course/course_folder.cfm?uuidCourse="+t.id)}),$("#qs_uuidCandidate").select2("open")});break;case"courses":if($("#CoursesOverviewList").length)$("#CoursesOverviewList").modal("show");else{UIFunctions.AjaxModal("CoursesOverviewList","/views/general/multiple-courses-modal.cfm?ts="+(new Date).getTime(),{},function(){t.BindCourseClicks()})}break;case"avatar":UIFunctions.OpenWindow("/messageCentre/uploadPhoto.cfm");break;case"password":objUserFunctions.OpenPasswordWindow();break;case"email_settings":UIFunctions.AjaxModal("EmailNotificationSettings","/views/user/email-notifications/?ts="+(new Date).getTime());break;case"hotkeys":UIFunctions.AjaxModal("HoykeysModal","/views/general/hotkeys.cfm?ts="+(new Date).getTime());break;case"tours":UIFunctions.AjaxModal("ToursModal","/views/general/tours.cfm?referrer="+strMasterData.szBaseScriptName+"&ts="+(new Date).getTime());break;case"logout":UIFunctions.GenerateModal("ConfirmLogout","Logout","<p>Are you sure you want to logout?",'<a class="btn btn-primary" href="/logout.cfm">Logout</a>');break;case"report_problem":var a=jQuery.extend({},strMasterData);delete a.strWindowDimensions,delete a.stuAPI,delete a.stuColors,delete a.stuProperties,delete a.stuUserPreferences,console.log(a);var n="json="+encodeURIComponent(JSON.stringify(a))+"&section="+encodeURIComponent($(".page-heading h2").text())+"&ts="+(new Date).getTime();UIFunctions.AjaxModal("ReportProblemModal","/views/general/report-problem.cfm?"+n)}}},objPrint={init:function(){this.printURL="/views/print/"},Print:function(e,t,a){var n=void 0!==t?t:"",i=void 0!==a?a:{},o=window.location.search.substr(1),r=this.printURL+"?mode="+e;switch(n.length&&(r+="&PrintID="+n),e){case"COURSE_SNAPSHOT":case"COURSE_METRICS":r+="&uuidCourse="+strMasterData.uuidCourse+"&uuidCandidate="+strMasterData.uuidCandidate;break;case"CONTACT_DIARY":case"CONTACT_DIARY_ENTRY":r+="&uuidCourse="+strMasterData.uuidCourse+"&uuidCandidate="+strMasterData.uuidCandidate+"&blnPrivate="+$("#contact-diary-filters #blnPrivate").val()+"&intEntryCategoryID="+$("#contact-diary-filters #intEntryCategoryID").val()+"&szFilter="+$("#contact-diary-filters #szFilter").val()+"&szOrderBy="+$("#contact-diary-filters #szOrderBy").val();break;case"CONTACT_DIARY_NODE":r+="&uuidCourse="+strMasterData.uuidCourse+"&uuidCandidate="+strMasterData.uuidCandidate+"&uuidTemplateNode="+strMasterData.uuidTemplateNode+"&blnPrivate="+$("#contact-diary-filters #blnPrivate").val()+"&intEntryCategoryID="+$("#contact-diary-filters #intEntryCategoryID").val()+"&szFilter="+$("#contact-diary-filters #szFilter").val()+"&szOrderBy="+$("#contact-diary-filters #szOrderBy").val();break;case"CONTACT_DIARY_JOURNEY":r+="&uuidCourse=&lstUUIDCourses="+strMasterData.lstUUIDCourses+"&uuidCandidate="+strMasterData.uuidCandidate+"&blnPrivate="+$("#contact-diary-filters #blnPrivate").val()+"&intEntryCategoryID="+$("#contact-diary-filters #intEntryCategoryID").val()+"&szFilter="+$("#contact-diary-filters #szFilter").val()+"&szOrderBy="+$("#contact-diary-filters #szOrderBy").val();break;case"COURSE_FOLDER":r+="&"+o;break;case"PROCESS_REPORT":r+="&uuidProcessTemplate="+$("#fSearch #uuidProcessTemplate").val()+"&uuidCompany="+$("#fSearch #uuidCompany").val()+"&uuidAssessor="+$("#fSearch #uuidAssessor").val()+"&uuidCourseTemplate="+$("#fSearch #uuidCourseTemplate").val();break;case"PROCESS_REPORT_ITEM":r+="&uuidProcessTemplate="+$("#fSearch #uuidProcessTemplate").val()+"&uuidCompany="+$("#fSearch #uuidCompany").val()+"&uuidAssessor="+$("#fSearch #uuidAssessor").val()+"&uuidCourseTemplate="+$("#fSearch #uuidCourseTemplate").val()+"&dtStart="+$("#fSearch #dtStart").val()+"&dtEnd="+$("#fSearch #dtEnd").val()+"&lStatusCode="+$('#fSearch input[name="lStatusCode"]:checked').valList()+"&lPriority="+$('#fSearch input[name="lPriority"]:checked').valList();break;case"SAMPLING_REPORT":r+="&uuidVerifier="+i.uuidVerifier+"&uuidAssessor="+i.uuidAssessor+"&uuidCourseTemplate="+i.uuidCourseTemplate+"&blnIncludePreviousVerifiers="+i.blnIncludePreviousVerifiers+"&dtStartISO="+i.dtStartISO+"&dtEndISO="+i.dtEndISO+"&szCandidateStatus="+i.szCandidateStatus+"&intVerificationType="+i.intVerificationType;break;case"PDR":r+="&uuidUser="+strMasterData.uuidUserPDR}UIFunctions.OpenWindow(r,"PrintWindow")},PrintCompetenceClaim:function(e){var t="/modules/print/competence-claim.cfm?uuidNode="+strMasterData.uuidNode+"&format="+e;UIFunctions.OpenWindow(t,"PrintCompetenceWindow")}},objExport={init:function(){this.exportURL="/views/export/"},Export:function(e){var t=this.exportURL+"?mode="+e;switch(e){case"PROCESS_REPORT":t+="&uuidProcessTemplate="+$("#fSearch #uuidProcessTemplate").val()+"&uuidCompany="+$("#fSearch #uuidCompany").val()+"&uuidAssessor="+$("#fSearch #uuidAssessor").val()+"&uuidCourseTemplate="+$("#fSearch #uuidCourseTemplate").val();break;case"PROCESS_REPORT_ITEM":t+="&uuidProcessTemplate="+$("#fSearch #uuidProcessTemplate").val()+"&uuidCompany="+$("#fSearch #uuidCompany").val()+"&uuidAssessor="+$("#fSearch #uuidAssessor").val()+"&uuidCourseTemplate="+$("#fSearch #uuidCourseTemplate").val()+"&dtStart="+$("#fSearch #dtStart").val()+"&dtEnd="+$("#fSearch #dtEnd").val()+"&lStatusCode="+$('#fSearch input[name="lStatusCode"]:checked').valList()+"&lPriority="+$('#fSearch input[name="lPriority"]:checked').valList()}UIFunctions.ChangePage(t)}},objTours={init:function(){},StartTour:function(e){var t=this;$.ajax({cache:!1,type:"POST",url:"/views/ajax/tours.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"LoadTour",returnFormat:"json",guidTour:e},success:function(e){1==e.intSuccess?t.RunTour(e.stuData.tour,e.stuData.steps):UIFunctions.ShowErrorModal()},error:function(e){UIFunctions.ShowErrorModal()},async:!0})},RunTour:function(e,t){var a=this;UIFunctions.CloseAllModals();for(var n=[],i=0;i<t.length;i++)n.push({element:t[i].szdomelementselector,title:t[i].sztitle,content:t[i].szdescription});var o=new Tour({backdrop:!0,backdropContainer:"#wrapper",storage:!1,steps:n,onEnd:function(){a.EndTour(e.guidtour)}});o.init(),o.start()},EndTour:function(e){this.MarkTour(e,"MarkAsViewed")},DismissTour:function(e){this.MarkTour(e,"MarkAsDismissed")},MarkTour:function(e,t){var a=this;$.ajax({cache:!1,type:"POST",url:"/views/ajax/tours.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:t,returnFormat:"json",guidTour:e},success:function(e){"MarkAsDismissed"==t&&(UIFunctions.CloseAllModals(),objWaffle.Open("tours")),a.RefreshTourTotals()},error:function(e){},async:!0})},RefreshTourTotals:function(){$.ajax({cache:!1,type:"POST",url:"/views/ajax/tours.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"TourTotals",returnFormat:"json",szScriptName:strMasterData.szBaseScriptName},success:function(e){if(1==e.intSuccess){var t=e.stuData,a=$("#tours-wrapper");0===t.intTotalNotViewed?(a.find("i.fa-bullhorn").removeClass("faa-tada animated"),a.find("#tours-count-badge").text("").hide()):(a.find("i.fa-bullhorn").addClass("faa-tada animated"),a.find("#tours-count-badge").text(t.intTotalNotViewed).show())}},error:function(e){UIFunctions.ShowErrorModal()},async:!0})}},objTags={init:function(e){this.stuParams=e},Save:function(e,t,a,n,i){this.SaveAction(1==a?"Tag":"Untag",e,t,n,i)},SaveAction:function(e,t,a,n,i){var o=void 0===UIFunctions||void 0===UIFunctions.ShowErrorModal?function(){alert("An error has occured.")}:UIFunctions.ShowErrorModal;$.ajax({cache:!1,type:"POST",url:"/views/ajax/tags.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:e,returnFormat:"json",lstTagReferences:t,lstObjectIDs:a},success:function(e){1==e.blnSuccess?$.isFunction(n)&&n(e):$.isFunction(i)?i(e.errorMessages):o()},error:function(e){$.isFunction(i)?i(response.errorMessages):o()},async:!0})}},objDocumentUploader={init:function(e){this.stuParams=e,this.arrUploadedFiles=[],this.arrFilenames=[]},Open:function(e,t,a,n){e=void 0!==e?e:"",t=void 0!==t?t:"",a=void 0!==a?a:"",n=void 0!==n?n:"",window.open("/views/documents/uploader/?ref="+e+"&parent="+t+"&doc="+a+"&rev="+n,"DocumentUploaderWindow","directories=no,height="+strMasterData.strWindowDimensions.intMaxPopoutHeight+",width="+strMasterData.strWindowDimensions.intMaxPopoutWidth+",location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no").focus()},InitUploader:function(e,t,a,n,i){var o=this;e=void 0!==e?e:"",t=void 0!==t?t:"",a=void 0!==a?a:"",n=void 0!==n?n:"",i=void 0===i||i,strMasterData.plupload={szUploadURL:"/views/ajax/uploader.cfm",szPluploadVersion:'2.3.1"',szUploadMode:"DOCUMENT_UPLOADER",blnMultipleSelection:i,blnClearOnCompletion:!0,callback:function(e,t,a){var n=jQuery.parseJSON(a.response);-1===o.arrFilenames.indexOf(n.stuFileDetails.name)&&(o.arrFilenames.push(n.stuFileDetails.name),o.arrUploadedFiles.push({filename:n.stuFileDetails.name,mimetype:t.type,size:t.size})),o.BuildUploadedList()},uploadCompleteCallback:function(e,t){$("#document-uploader #uploader-save").attr("disabled",!1).removeClass("disabled")}},LA_Plupload.Init()},BuildUploadedList:function(){var e=this,t=$("#document-uploader #completed-files"),a='<ul class="list-unstyled m-b-n">';for(i=0;i<e.arrUploadedFiles.length;i++)a+='<li class="m-b-sm" style="border-bottom:1px solid #e5e6e7;padding-bottom:5px;" data-filename="'+e.arrUploadedFiles[i].filename+'"><i class="fa fa-file m-r-xs"></i> '+e.arrUploadedFiles[i].filename+' <span class="text-muted">('+UIFunctions.FormatFileSize(e.arrUploadedFiles[i].size)+')</span><a class="pull-right" href="javascript:objDocumentUploader.DeleteTemporaryDocument(\''+e.arrUploadedFiles[i].filename+'\');" title="Delete Document"><i class="fa fa-trash text-danger"></i></a></li>';a+="</ul>",t.empty().html(a)},DeleteTemporaryDocument:function(t){var e=this,a=function(t){$('#completed-files li[data-filename="'+t+'"]').remove(),e.arrUploadedFiles=$.grep(e.arrUploadedFiles,function(e){return e.filename!=t}),e.arrFilenames=$.grep(e.arrFilenames,function(e){return e!=t}),0===e.arrUploadedFiles.length&&$("#document-uploader #uploader-save").attr("disabled",!0).addClass("disabled")};$.ajax({cache:!1,type:"POST",url:"/views/ajax/documents.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"DeleteTemporaryDocument",returnFormat:"json",szFilename:t},success:function(e){a(t)},error:function(e){a(t)},async:!0})},SaveDocuments:function(e,t,a,n,i,o){e=void 0!==e?e:"",t=void 0!==t?t:"",a=void 0!==a?a:"",n=void 0!==n?n:"";var r=1===$('#document-uploader input[name="szUploadType"][type="hidden"]').length?$('#document-uploader input[name="szUploadType"][type="hidden"]').val():$('#document-uploader input[name="szUploadType"][type="radio"]:checked').val();i=void 0!==i&&i,o=void 0===o||o,$.ajax({cache:!1,type:"POST",url:"/views/ajax/documents.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"SaveDocuments",returnFormat:"json",arrUploadedFiles:JSON.stringify(this.arrUploadedFiles),reference:e,parentID:t,uuidDocument:a,uuidRevision:n,szUploadType:r},success:function(e){i&&UIFunctions.CloseWindow(!0),o&&UIFunctions.ReloadPage()},error:function(e){UIFunctions.ShowErrorModal()},async:!0})}},objDocumentManagement={init:function(e){this.stuParams=e},Download:function(e,t){t=void 0===t?"":t,window.open("/views/documents/open.cfm?uuidDocument="+e+(0<t.length?"&uuidRevision="+t:""),"_blank")},ViewRevisionFiles:function(e,t){UIFunctions.CloseAllModals(),UIFunctions.AjaxModal("PreviewRevisionFilesModal_"+t,"/views/documents/revision-files.cfm?id="+t)},ViewRevisions:function(e){UIFunctions.CloseAllModals(),UIFunctions.AjaxModal("PreviewRevisionHistory_"+e,"/views/documents/revision-history.cfm?id="+e)},EditDetails:function(e){UIFunctions.CloseAllModals(),UIFunctions.AjaxModal("EditDocumentDetailsModal_"+e,"/views/documents/edit-details.cfm?doc="+e)},UpdateDetails:function(e){var t=$.trim($("#frmDocumentDetails #szDocumentName").val());0==t.length?alert("Title is required"):255<t.length?alert("Title may only be a maximum of 255 characters."):$.ajax({cache:!1,type:"POST",url:"/views/ajax/documents.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"UpdateDocumentDetails",returnFormat:"json",uuidDocument:e,szDocumentName:t,szDescription:$.trim($("#frmDocumentDetails #szDescription").val())},success:function(e){1==e.intSuccess?(UIFunctions.CloseAllModals(),UIFunctions.ReloadPage()):UIFunctions.ShowErrorModal()},error:function(e){UIFunctions.ShowErrorModal()},async:!0})},Delete:function(e){$.ajax({cache:!1,type:"POST",url:"/views/ajax/documents.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"DeleteDocument",returnFormat:"json",uuidDocument:e},success:function(e){UIFunctions.ReloadPage()},error:function(e){UIFunctions.ShowErrorModal()},async:!0})}},ImageUploader=function(e,t,a){var n={};return n.reference=void 0!==e?e:"",n.parentID=void 0!==t?t:"",n.guidImage=void 0!==a?a:"",n.stuFileSizes={chunk:"1mb",min:"1b",max:"2mb",minDsp:"1 byte",maxDsp:"2 MB"},n.selectors={container:$("#"+n.parentID+"_container"),browse:$("#"+n.parentID+"_browse"),files:$("#"+n.parentID+"_files"),wrapper:$("#"+n.parentID+"_wrapper")},n.Init=function(){n.uploader=ImagePlupload(n.selectors,{runtimes:"html5,flash,html4",url:"/views/ajax/uploader.cfm",drop_element:n.parentID+"_container",browse_button:n.parentID+"_browse",container:n.parentID+"_container",flash_swf_url:"/assets/V2/plugins/plupload/2.3.1/Moxie.swf",urlstream_upload:!0,file_data_name:"file",multipart:!0,chunk_size:n.stuFileSizes.chunk,max_retries:5,multi_selection:!1,filters:{max_file_size:n.stuFileSizes.max,min_file_size:n.stuFileSizes.min,prevent_duplicates:!0,mime_types:[{title:"Image files",extensions:"jpg,gif,png"}]},multipart_params:{szRef:strMasterData.szRef,uuidUser:strMasterData.uuidUser}},{FileUploaded:function(e,t){"FORM_HEADER_LOGO"!=n.reference&&"FORM_FOOTER_LOGO"!=n.reference||(n.selectors.wrapper.find(".completed-images").empty().html('<div class="alert alert-info"><i class="fa fa-lg fa-spinner fa-pulse m-r-xs"></i> Processing Image </div>'),$.ajax({cache:!1,type:"POST",url:"/views/ajax/forms.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"ProcessImage",returnFormat:"json",mimeType:t.stuFileDetails.mimeType,size:t.stuFileDetails.size,fileName:t.stuFileDetails.name},success:function(e){n.selectors.wrapper.find(".completed-images").html('<img src="data:image/png;base64,'+e.image+'" alt="" class="img-responsive" />'),"FORM_HEADER_LOGO"==n.reference&&formBuilderEditor.form.headerLogoGUID(e.guidImage),"FORM_FOOTER_LOGO"==n.reference&&formBuilderEditor.form.footerLogoGUID(e.guidImage)},error:function(e){},async:!0}))}}),n.uploader.Init()},n},objFormManagement={init:function(e){this.stuParams=e},Open:function(e,t){var a="/formbuilder/editor/editor.cfm?templateTypeRef="+(e=void 0!==e?e:"")+"&categoryRef="+(t=void 0!==t?t:"")+"&referer=ReactFormManager";UIFunctions.OpenWindow(a,"FormEditor","max","max")},Edit:function(e,t){var a="/formbuilder/editor/editor.cfm?uuidForm="+(e=void 0!==e?e:"")+"&uuidFormVersion="+(t=void 0!==t?t:"")+"&referer=ReactFormManager";UIFunctions.OpenWindow(a,"FormEditor")},Archive:function(e,t){},Preview:function(e,t){var a="/formbuilder/form/?referer=editorPreview&preview=true&uuidForm="+e;UIFunctions.OpenWindow(a,"FormPreview")},UsedIn:function(e,t){UIFunctions.CloseAllModals(),UIFunctions.AjaxModal("FormUsedInModal_"+e,"/views/forms/used-in.cfm?form="+e+"&version="+t)},LoadAssignedForms:function(e,t,a,n){e=void 0!==e?e:"",a=void 0!==a?a:"",t=void 0!==t?t:"",n=void 0===n||n;var i=$("#"+a);0<e.length&&0<t.length&&1==i.length&&(i.find("td.placeholder").append('<span class="pull-right forms-loading-spinner"><i class="fa fa-lg fa-spinner fa-spin"></i></span>'),$.ajax({cache:!1,type:"GET",url:"/views/ajax/forms.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),data:{method:"LoadAssignedForms",parentID:e,parentType:t,blnAssignOptions:n,formSelectorID:a},success:function(e){i.find(".forms-loading-spinner").remove(),e.length&&i.find("tbody").html(e)},error:function(e){UIFunctions.ShowErrorModal()},async:!0}))},OpenForm:function(e,t,a,n){var i="/formbuilder/form/?referer=FormbuilderSelector";i+="&associatedObjectTypeRef="+(a=void 0!==a?a:""),i+="&associatedObjectUuid="+(n=void 0!==n?n:""),i+="&uuidForm="+(e=void 0!==e?e:""),i+="&uuidFBInstance="+(t=void 0!==t?t:""),UIFunctions.OpenWindow(i,"FormWindow")},OpenFormAssignmentModal:function(n,i,e,o,r){UIFunctions.GenerateModal("FormAssignModal","Assign Form",objMarkup.select2("FormAssignSelect"),"<a href=\"javascript:objFormManagement.AssignForm('"+n+"', '"+i+"', '"+e+'\');" class="btn btn-primary">Assign Form</a>',{},function(e){var t=$("select#FormAssignSelect"),a=$('input[type="hidden"]#FormAssignSelect_displayValue');UIFunctions.BindSelect2AjaxAutoComplete(t,a,"Forms","Select a form",function(e){return{szFilter:e.term,page:e.page,parentID:n,parentType:i,typeReference:o,categoryReference:r}})})},AssignForm:function(t,a,n){var e=$("select#FormAssignSelect").val();e&&0<e.length?$.ajax({cache:!1,type:"POST",url:"/views/ajax/forms.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"AssignForm",parentID:t,parentType:a,uuidFBTemplate:e,returnFormat:"json"},success:function(e){UIFunctions.CloseAllModals(),1==e.blnSuccess?objFormManagement.LoadAssignedForms(t,a,n):UIFunctions.ShowErrorModal()},error:function(e){UIFunctions.ShowErrorModal()},async:!0}):alert("Please select a form!")},UnassignForm:function(e,t,a,n){confirm("Are you sure you want to un-assign this form?")&&$.ajax({cache:!1,type:"POST",url:"/views/ajax/forms.cfc?_cf_nodebug=false&ts="+(new Date).getTime(),dataType:"json",data:{method:"UnassignForm",parentID:t,parentType:a,uuidFBTemplate:e,returnFormat:"json"},success:function(e){UIFunctions.CloseAllModals(),1==e.blnSuccess?objFormManagement.LoadAssignedForms(t,a,n):UIFunctions.ShowErrorModal()},error:function(e){UIFunctions.ShowErrorModal()},async:!0})},FontAwesomeIconClass:function(e){switch(e){case"icon-question-sign":return"fa-question-circle";case"icon-info-sign":return"fa-info-circle";case"icon-exclamation-sign":return"fa-exclamation-circle";case"icon-flag":return"fa-flag";case"icon-tag":return"fa-tag";case"icon-warning-sign":return"fa-exclamation-triangle";default:return""}}};